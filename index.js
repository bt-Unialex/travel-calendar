import{a as S}from"./assets/vendor-C19taMLP.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();const h={GM_API_KEY:"AIzaSyCRqbfD4tRFZ-38qw05HcOWlWRQqoPfjYY"};console.log(h.GM_API_KEY);(e=>{var t,r,a,o="The Google Maps JavaScript API",n="google",i="importLibrary",u="__ib__",m=document,l=window;l=l[n]||(l[n]={});var p=l.maps||(l.maps={}),L=new Set,g=new URLSearchParams,$=()=>t||(t=new Promise(async(f,w)=>{await(r=m.createElement("script")),g.set("libraries",[...L]+"");for(a in e)g.set(a.replace(/[A-Z]/g,G=>"_"+G[0].toLowerCase()),e[a]);g.set("callback",n+".maps."+u),r.src=`https://maps.${n}apis.com/maps/api/js?`+g,p[u]=f,r.onerror=()=>t=w(Error(o+" could not load.")),r.nonce=m.querySelector("script[nonce]")?.nonce||"",m.head.append(r)}));p[i]?console.warn(o+" only loads once. Ignoring:",e):p[i]=(f,...w)=>L.add(f)&&$().then(()=>p[i](f,...w))})({key:h.GM_API_KEY,v:"weekly"});let d,E,s;async function O(e={lat:-25.344,lng:131.031}){const{Map:t}=await google.maps.importLibrary("maps");return d=await new t(document.getElementById("map"),{zoom:5,center:e,mapId:"DEMO_MAP_ID"}),E=await W(d,e,!0,"Draggable marker"),s=new google.maps.InfoWindow,{map:d,marker:E,infoWindow:s}}async function I(){try{const e=await C();s.setPosition(e),s.setContent("Location found."),s.open(d),d.setCenter(e)}catch{B(!0,s,d.getCenter())}}async function C(){return new Promise((e,t)=>{if(!navigator.geolocation){reject(new Error("Geolocation is not supported by this browser."));return}navigator.geolocation.getCurrentPosition(r=>e({lat:r.coords.latitude,lng:r.coords.longitude}),r=>t(r),{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})})}async function N(e,t){await google.maps.importLibrary("geometry");const r=google.maps.geometry.encoding.decodePath(t);new google.maps.Polyline({path:r,geodesic:!0,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:4}).setMap(e)}function q(e,t){e.position=t}function D(){return{lat:Number(P(-85.05,85.05)),lng:Number(P(-180,180))}}async function W(e,t,r,a){const{AdvancedMarkerElement:o}=await google.maps.importLibrary("marker");return new o({map:e,position:t,gmpDraggable:r,title:a})}function P(e,t){return Math.random()*(t-e)+e}function B(e,t,r){t.setPosition(r),t.setContent("Error: The Geolocation service failed."),t.open(d)}function y(e,t){s.close(),s.setContent(t),s.open(e.map,e)}const b=document.querySelector(".resizer"),A=b.previousElementSibling;b.nextElementSibling;let v=!1;b.addEventListener("mousedown",e=>{v=!0,document.addEventListener("mousemove",k),document.addEventListener("mouseup",_)});function k(e){if(!v)return;let t=e.clientX-A.getBoundingClientRect().left;A.style.width=`${t}px`}function _(){v=!1,document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",_)}async function K(e,t){const r="https://routes.googleapis.com/directions/v2:computeRoutes",a={origin:{location:{latLng:{latitude:e.lat,longitude:e.lng}}},destination:{location:{latLng:{latitude:t.lat,longitude:t.lng}}},travelMode:"WALK",computeAlternativeRoutes:!1,routeModifiers:{avoidTolls:!1,avoidHighways:!1,avoidFerries:!1},languageCode:"en-US",units:"IMPERIAL"};try{return(await S.post(r,a,{headers:{"Content-Type":"application/json","X-Goog-Api-Key":h.GM_API_KEY,"X-Goog-FieldMask":"routes.duration,routes.distanceMeters,routes.polyline.encodedPolyline"}})).data}catch(o){throw console.error("Помилка отримання маршруту:",o.response?.data||o.message),o}}function x(e){const o=Math.floor(e/86400),n=Math.floor(e%86400/3600),i=Math.floor(e%3600/60),u=e%60;return{days:o,hours:n,minutes:i,seconds:u}}const F=document.getElementById("btn-random-place"),Y=document.getElementById("btn-my-coordinate"),{map:M,marker:c,infoWindow:R}=await O();F.addEventListener("click",async()=>{const e=await D();M.setCenter(e),q(c,e)});Y.addEventListener("click",async()=>{await I(),M.setZoom(15)});c.addListener("dragstart",()=>{R.close()});c.addListener("dragend",async()=>{const e=c.position;let t=`<p>Pin dropped at: ${e.lat}, ${e.lng}</p>`,r=null;y(c,'<div class="loader"></div>');try{const a=await C(),o=await K(a,e);if(!o.routes||o.routes.length===0)t+="<b>No routes found</b>",y(c,t);else{const n=o.routes[0],i=n.distanceMeters>1e3?n.distanceMeters/1e3:n.distanceMeters,{days:u,hours:m,minutes:l}=x(Number.parseInt(n.duration));r=n.polyline?.encodedPolyline||null,t+=`<p>Approximate route length: ${i} ${i>1e3?"km":"m"}</p>
      <p>Approximate route time: ${u} d., ${m} h., ${l} min. </p>`,r?t+='<button id="btn-draw-route" type="button">Draw route</button>':t+="<b>No route polyline found</b>"}y(c,t),google.maps.event.addListenerOnce(R,"domready",()=>{const n=document.getElementById("btn-draw-route");n&&n.addEventListener("click",()=>{r?N(M,r):console.error("Cannot draw route: No encoded polyline available.")})})}catch(a){console.error("Error fetching route:",a),t+="<b>Error retrieving route data</b>",await I(),y(c,t)}});
//# sourceMappingURL=index.js.map
